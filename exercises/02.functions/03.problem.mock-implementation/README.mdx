# Mock implementation

<EpicVideo url="https://www.epicweb.dev/workshops/mocking-techniques-in-vitest/functions/mock-implementation" />

In this one, we have an `OrderController` class responsible for handling orders in our eshop. It has a `.createOrder()` method that accepts a `cart` object and does the following:

1. Throws an error if any of the cart items are out of stock;
1. Otherwise, creates a new order object and returns it.

The `.createOrder()` method relies on another `.isItemInStock()` method of the same class to check any given cart item's availability.

<CodeFile file="order-controller.ts" range="21-39" highlight="23" />

The data for the item availability itself comes from the `stock.json` file that 👨‍💼 Peter the Project Manager does a faithful job of updating on a daily basis (think of this JSON file as any source of data—e.g. a database).

<CodeFile file="order-controller.ts" range="1,44-51" highlight="45" />

That's the responsibility Peter bestowed upon himself.

Your responsibility, however, is to test the `.createOrder()` method on **the** `controller` class. There are couple of ways you can use mocking to help you with that, especially when it comes to modeling different item availability states.

👨‍💼 Write automated tests for _both_ of the expectations toward the `.createOrder()` method by using [`.mockReturnValue()`](https://vitest.dev/api/mock.html#mockreturnvalue) and [`.mockImplementation()`](https://vitest.dev/api/mock.html#mockimplementation) utilities in Vitest to control the behavior of the `.isItemInStock()` method. By the end of the exercise, `npm test` must pass!
